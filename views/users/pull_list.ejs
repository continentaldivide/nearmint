<%- include("../partials/header.ejs") %>

<h2>My Pull List</h2>

<% pull_list.forEach((series) => { %>

<div>
  <p><%= series.title %></p>
  <form method="POST" action="/users/<%= user.username %>/pull_list?_method=DELETE">
    <input
      type="text"
      name="id"
      id="id"
      value="<%= series.id %>"
      required
      hidden
    />
    <button type="submit">Remove from pull list</button>
  </form>
</div>

<% }) %> <% if (comics.length > 0) { %> <% comics.forEach((comic) => { %>
<div class="comic-search-result">
  <p><%= comic.title %></p>
  <a href="<%= comic.urls[0].url %>">view on marvel.com</a>
  <img
    src="<%= comic.thumbnail.path %>.<%= comic.thumbnail.extension %>"
    alt=""
  />
  <form method="POST" action="/users/<%= user.username %>/collection">
    <input
      type="text"
      name="id"
      id="id"
      value="<%= comic.id %>"
      required
      hidden
    />
    <input
      type="text"
      name="title"
      id="title"
      value="<%= comic.title %>"
      required
      hidden
    />
    <input
      type="text"
      name="series"
      id="series"
      value="<%= comic.series.name %>"
      required
      hidden
    />
    <input
      type="text"
      name="issue_number"
      id="issue_number"
      value="<%= comic.issueNumber %>"
      required
      hidden
    />
    <input
      type="text"
      name="thumbnail_url"
      id="thumbnail_url"
      value="<%= comic.thumbnail.path %>.<%= comic.thumbnail.extension %>"
      required
      hidden
    />
    <input
      type="text"
      name="marvel_url"
      id="marvel_url"
      value="<%= comic.urls[0].url %>"
      required
      hidden
    />
    <input type="text" name="in_collection" id="in_collection" value="true" required hidden />
    <button type="submit">Add to collection</button>
  </form>
</div>
<% }) %> <% } else { %>
<p>
  Hmm...this is looking a little sparse. Try going to the
  <a href="/search/series/">series search page</a> and finding a series to add to your
  pull list!
</p>
<% } %> <%- include("../partials/footer.ejs") %>
